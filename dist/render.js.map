{"version":3,"file":"render.js","sources":["../src/config.js","../src/helper.js","../src/render.js"],"sourcesContent":["const config = window.wdg.charts.config || {};\n\nexport default config;","import defaultConfig from './config.js';\n\nexport function parseConfig( config, custom = {} ) {\n\tconst chartConfig = Object.assign( defaultConfig, config, custom );\n\t// console.log( 1, {chartConfig} );\n\n\tchartConfig.data.axes = chartConfig.data.axes || {};\n\n\tif ( chartConfig.axis && chartConfig.axis.y ) {\n\t\tif ( chartConfig.axis.y.primary ) {\n\t\t\tchartConfig.data.axes[ chartConfig.axis.y.primary ] = 'y';\n\t\t}\n\n\t\tif ( chartConfig.axis.y.secondary ) {\n\t\t\tchartConfig.data.axes[ chartConfig.axis.y.secondary ] = 'y2';\n\t\t\tchartConfig.axis.y2 = { show: true };\n\t\t} else {\n\t\t\tchartConfig.axis.y2 = { show: false };\n\t\t}\n\t}\n\n\t// console.log( 2, {chartConfig} );\n\n\treturn chartConfig;\n}\n","import c3 from 'c3';\nimport { parseConfig } from './helper.js';\n\nexport function render( node ) {\n\tlet config, nodeConfig = {};\n\n\tif ( node.dataset.c3Config ) {\n\t\ttry {\n\t\t\tnodeConfig = JSON.parse( node.dataset.c3Config );\n\t\t} catch( e ) {\n\t\t\tconsole.error( 'wdg chart: Invalid json' );\n\t\t\treturn;\n\t\t}\n\n\t\tconfig = parseConfig(\n\t\t\tnodeConfig,\n\t\t\t{\n\t\t\t\tbindto: node,\n\t\t\t}\n\t\t);\n\t}\n\n \tconsole.log( 'chart render', node, config.data.type, config );\n \tc3.generate(config);\n}\n\ndocument.addEventListener( 'DOMContentLoaded', () => Array.from( document.querySelectorAll( '.c3-chart' ) ).forEach( render ) );\n"],"names":["config","window","wdg","charts","parseConfig","custom","chartConfig","Object","assign","defaultConfig","data","axes","axis","y","primary","secondary","y2","show","render","node","nodeConfig","dataset","c3Config","JSON","parse","e","console","error","bindto","log","type","c3","generate","document","addEventListener","Array","from","querySelectorAll","forEach"],"mappings":"+LAAMA,EAASC,OAAOC,IAAIC,OAAOH,QAAU,GCEpC,SAASI,EAAaJ,OAAQK,yDAAS,GACvCC,EAAcC,OAAOC,OAAQC,EAAeT,EAAQK,UAG1DC,EAAYI,KAAKC,KAAOL,EAAYI,KAAKC,MAAQ,GAE5CL,EAAYM,MAAQN,EAAYM,KAAKC,IACpCP,EAAYM,KAAKC,EAAEC,UACvBR,EAAYI,KAAKC,KAAML,EAAYM,KAAKC,EAAEC,SAAY,KAGlDR,EAAYM,KAAKC,EAAEE,WACvBT,EAAYI,KAAKC,KAAML,EAAYM,KAAKC,EAAEE,WAAc,KACxDT,EAAYM,KAAKI,GAAK,CAAEC,MAAM,IAE9BX,EAAYM,KAAKI,GAAK,CAAEC,MAAM,IAMzBX,ECpBD,SAASY,EAAQC,OACnBnB,EAAQoB,EAAa,MAEpBD,EAAKE,QAAQC,SAAW,KAE3BF,EAAaG,KAAKC,MAAOL,EAAKE,QAAQC,UACrC,MAAOG,eACRC,QAAQC,MAAO,2BAIhB3B,EAASI,EACRgB,EACA,CACCQ,OAAQT,IAKVO,QAAQG,IAAK,eAAgBV,EAAMnB,EAAOU,KAAKoB,KAAM9B,GACrD+B,UAAGC,SAAShC,UAGdiC,SAASC,iBAAkB,oBAAoB,kBAAMC,MAAMC,KAAMH,SAASI,iBAAkB,cAAgBC,QAASpB"}