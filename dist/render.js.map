{"version":3,"file":"render.js","sources":["../src/config.js","../src/helper.js","../src/render.js"],"sourcesContent":["const config = window.wdg.charts.config || {};\n\nexport default config;","import defaultConfig from './config.js';\nimport { createBlock } from '@wordpress/blocks';\n\nexport function parseConfig( config, custom = {} ) {\n\tconst chartConfig = Object.assign( {}, defaultConfig, config, custom );\n\n\tchartConfig.data.axes = chartConfig.data.axes || {};\n\n\tif ( chartConfig.axis && chartConfig.axis.y ) {\n\t\tif ( chartConfig.axis.y.primary ) {\n\t\t\tchartConfig.data.axes[ chartConfig.axis.y.primary ] = 'y';\n\t\t}\n\n\t\tif ( chartConfig.axis.y.secondary ) {\n\t\t\tchartConfig.data.axes[ chartConfig.axis.y.secondary ] = 'y2';\n\t\t\tchartConfig.axis.y2 = { show: true };\n\t\t} else {\n\t\t\tchartConfig.axis.y2 = { show: false };\n\t\t}\n\t}\n\n\t// ignoring caption\n\tif ( chartConfig.hasOwnProperty('caption') ) {\n\t\tdelete chartConfig.caption;\n\t}\n\n\treturn chartConfig;\n}\n\nexport const chartTypes = [\n\t'c3/area-spline',\n\t'c3/area',\n\t'c3/bar',\n\t'c3/donut',\n\t'c3/line',\n\t'c3/pie',\n\t'c3/spline',\n];\n\nexport function getBlockTransform( blockType ) {\n\treturn {\n\t\ttype: 'block',\n\t\tblocks: chartTypes.filter( chartType => chartType !== blockType ),\n\t\ttransform: ( attributes ) => createBlock( blockType, attributes ),\n\t}\n}\n","import c3 from 'c3';\nimport { parseConfig } from './helper.js';\n\nexport function render( node ) {\n\tlet config, nodeConfig = {};\n\n\tif ( node.dataset.c3Config ) {\n\t\tconst c3Root = document.createElement('div');\n\t\tnode.insertAdjacentElement( 'afterbegin', c3Root );\n\n\t\ttry {\n\t\t\tnodeConfig = JSON.parse( node.dataset.c3Config );\n\t\t} catch( e ) {\n\t\t\tconsole.error( 'wdg-c3-charts: Invalid json', node.dataset.c3Config );\n\t\t\treturn;\n\t\t}\n\n\t\tconfig = parseConfig(\n\t\t\tnodeConfig,\n\t\t\t{\n\t\t\t\tbindto: c3Root,\n\t\t\t\tdone: function() {\n\t\t\t\t\tconsole.log( 'done!', node );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n \tconsole.log( 'chart render', node, config.data.type, config );\n \tc3.generate(config);\n}\n\ndocument.addEventListener( 'DOMContentLoaded', () => Array.from( document.querySelectorAll( '.wdg-c3-chart' ) ).forEach( render ) );\n"],"names":["config","window","wdg","charts","parseConfig","custom","chartConfig","Object","assign","defaultConfig","data","axes","axis","y","primary","secondary","y2","show","hasOwnProperty","caption","render","node","nodeConfig","dataset","c3Config","c3Root","document","createElement","insertAdjacentElement","JSON","parse","e","console","error","bindto","done","log","type","c3","generate","addEventListener","Array","from","querySelectorAll","forEach"],"mappings":"+LAAMA,EAASC,OAAOC,IAAIC,OAAOH,QAAU,GCGpC,SAASI,EAAaJ,OAAQK,yDAAS,GACvCC,EAAcC,OAAOC,OAAQ,GAAIC,EAAeT,EAAQK,UAE9DC,EAAYI,KAAKC,KAAOL,EAAYI,KAAKC,MAAQ,GAE5CL,EAAYM,MAAQN,EAAYM,KAAKC,IACpCP,EAAYM,KAAKC,EAAEC,UACvBR,EAAYI,KAAKC,KAAML,EAAYM,KAAKC,EAAEC,SAAY,KAGlDR,EAAYM,KAAKC,EAAEE,WACvBT,EAAYI,KAAKC,KAAML,EAAYM,KAAKC,EAAEE,WAAc,KACxDT,EAAYM,KAAKI,GAAK,CAAEC,MAAM,IAE9BX,EAAYM,KAAKI,GAAK,CAAEC,MAAM,IAK3BX,EAAYY,eAAe,mBACxBZ,EAAYa,QAGbb,ECvBD,SAASc,EAAQC,OACnBrB,EAAQsB,EAAa,MAEpBD,EAAKE,QAAQC,SAAW,KACtBC,EAASC,SAASC,cAAc,OACtCN,EAAKO,sBAAuB,aAAcH,OAGzCH,EAAaO,KAAKC,MAAOT,EAAKE,QAAQC,UACrC,MAAOO,eACRC,QAAQC,MAAO,8BAA+BZ,EAAKE,QAAQC,UAI5DxB,EAASI,EACRkB,EACA,CACCY,OAAQT,EACRU,KAAM,WACLH,QAAQI,IAAK,QAASf,MAMzBW,QAAQI,IAAK,eAAgBf,EAAMrB,EAAOU,KAAK2B,KAAMrC,GACrDsC,UAAGC,SAASvC,UAGd0B,SAASc,iBAAkB,oBAAoB,kBAAMC,MAAMC,KAAMhB,SAASiB,iBAAkB,kBAAoBC,QAASxB"}